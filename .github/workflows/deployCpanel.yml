name: üöÄ Deploy TLGM-Backend on push

on:
  push:
    branches:
      - main  # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ workflow ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£ push ‡πÑ‡∏õ‡∏ó‡∏µ‡πà main branch

jobs:
  web-deploy:
    name: üéâ Deploy
    runs-on: ubuntu-latest  # ‡πÉ‡∏ä‡πâ Ubuntu ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô

    steps:
    - name: üöö Get latest code
      uses: actions/checkout@v4  # ‡πÉ‡∏ä‡πâ action ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏≤‡∏Å repository

    - name: üõ†Ô∏è Set up Node.js 20.17.0
      uses: actions/setup-node@v3
      with:
        node-version: '20.17.0'  # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô Node.js ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

    - name: üì¶ Install npm dependencies
      run: npm install  # ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á npm packages

    - name: üìÇ Sync files
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5  # ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á FTP-Deploy-Action
      with:
        server: ${{ secrets.FTP_SERVER }}  # ‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå FTP ‡∏à‡∏≤‡∏Å GitHub Secrets
        username: ${{ secrets.FTP_USERNAME }}  # ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ FTP ‡∏à‡∏≤‡∏Å GitHub Secrets
        password: ${{ secrets.FTP_PASSWORD }}  # ‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô FTP ‡∏à‡∏≤‡∏Å GitHub Secrets
        local-dir: ./  # Local directory to upload
        server-dir: tlgm_api/
